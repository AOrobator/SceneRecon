Research Log==========This is a log of all my findings and processes while making this project.## 2.07.2014For my first step, I want to figure which sensors I should use on the device tocheck the device orientation, for taking pictures. I want to do this so that Ican make sure that the user is taking upright pictures every time. Upon lookingat the different types of [sensors that are available on theAndroid platform](http://developer.android.com/guide/topics/sensors/sensors_overview.html),there are a few that stood out for me and might be of use:* [TYPE_ORIENTATION](http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_ORIENTATION): Measures degrees of rotation that a device makes around allthree physical axes (x, y, z). As of API level 3 you can obtain the inclinationmatrix and rotation matrix for a device by using the gravity sensor and thegeomagnetic field sensor in conjunction with the getRotationMatrix() method.* [TYPE_ROTATION_VECTOR](http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_ROTATION_VECTOR): Measures the orientation of a device by providing thethree elements of the device's rotation vector.In the documentation, it says that TYPE_ORIENTATION can be used for determiningdevice position while TYPE_ROTATION_VECTOR is used for motion detection androtation detection.Below are the available sensors on my testing device, an HTC One. Both sensorsthat I'm interested in are present.* 3-axis Magnetic field sensor* 3-axis Accelerometer* Proximity sensor* Light sensor* Gyroscope sensor* **Orientation sensor*** **Rotation vector*** Linear acceleration* Gravity* Gesture sensor### The coordinate system for the world![The coordinate system for the world](http://developer.android.com/images/axis_globe_inverted.png)### The coordinate system for a device![The coordinate system for a device](http://developer.android.com/images/axis_device.png)Based on the [documentation](http://developer.android.com/guide/topics/sensors/sensors_position.html),for now it seems that I should use the orientation sensor. It provides the followingdata via [`getOrientation`](http://developer.android.com/reference/android/hardware/SensorManager.html#getOrientation(float[], float[])). All units are in radians:* SensorEvent.values[0] : Azimuth (angle around the z-axis)* SensorEvent.values[1] : Pitch (angle around the x-axis)* SensorEvent.values[2] : Roll (angle around the y-axis)---## 2.09.2014For my UI, I want to have something similar to the panorama feature on my HTCOne running KitKat 4.4.2 Sense 5.5. When the device is in landscape mode, butthe device's Y-axis isn't parallel to flat ground, it displays a line conveyingthis information, like so:![Device with Y-Axis not parallel to flat ground](https://github.com/AOrobator/SceneRecon/raw/master/img/Panorama_Off_Center.png)When the device's Y-Axis is parallel to flat ground, the dotted blue line willoverlap the gray dotted line like so:![Device with Y-Axis parallel to flat ground](https://github.com/AOrobator/SceneRecon/raw/master/img/Panorama_On_Center.png)I'm doing this so that all pictures that a user takes around an image will be asstraight as possible. The way I calculate this is by using the device's gravitysensor to measure the acceleration due to gravity in the x-direction. If theabsolute value of the measured acceleration is within an epsilon of 9.8 m/s^2,it's Y-axis is parallel to flat ground. Otherwise, there is a significant componentof gravity on another axis.### Current ProgressCurrently I have several `TextView`s displaying the acceleration due to gravityfor each axis, as shown below:![Current Progress](https://github.com/AOrobator/SceneRecon/raw/master/img/SceneRecon_progress_02_09_2014.png)---## 2.12.2014### Current ProgressI just finished making a custom view titled [`HorizontalOffsetView`](https://github.com/AOrobator/SceneRecon/blob/master/app/src/main/java/com/orobator/android/scenerecon/view/customviews/HorizontalOffsetView.java). Itdetermines whether or not the device is horizontal with respect to the ground.When I put this on top of the camera view, users will know when they are takinghorizontal pictures. Currently I'm using the gravity sensor to do this, but Ithink I'll have to end up using the orientation vector sensor, because that willlet me know about the horizontal condition, and will let me know when the userhas done a 360 on a particular axis. `HorizontalOffsetView` has very similarbehavior to the custom view seen in the panorama view of HTC Sense 5.5's cameraapp. Here are some screenshots:#### Non-Horizontal![Non-Horizontal View](https://github.com/AOrobator/SceneRecon/raw/master/img/Horizontal_Offset_View_off_center.png)#### Horizontal![Horizontal View](https://github.com/AOrobator/SceneRecon/raw/master/img/Horizontal_Offset_View_on_center.png)---